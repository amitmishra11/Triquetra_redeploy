<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

	<script src="https://cdn.jsdelivr.net/npm/axios@0.26.1/dist/axios.min.js"></script>
</head>
<body>
	<hr/>
<label>Amount    :</label><input type=text id="order-amt" /><br/>
<button id="order-button1">Get Order id from server</button> <br/>
<!-- <script>
document.getElementById('order-button1').onclick = function(e){
var url = '/api/payment/order';
//     var params = {
//   amount: document.getElementById('order-amt').value,  
//   currency: "INR",
//   receipt: "su001",
//   payment_capture: '1'
// };
// console.log(params);

// src="https://cdn.jsdelivr.net/npm/axios@0.26.1/dist/axios.min.js"

// var xmlHttp = new XMLHttpRequest();
// xmlHttp.open("POST", url, true); // false for synchronous request
// xmlHttp.setRequestHeader("Content-type", "application/json");

// xmlHttp.onreadystatechange = function (res) {
//     if (xmlHttp.readyState === 4) {
//       res=JSON.parse(xmlHttp.responseText);
//       document.getElementById('rzp-text').value=res.sub.id;
//     }
// }

// xmlHttp.send(JSON.stringify(params));
}
</script> -->
<br/>
<br/>
<br/>
<br/>
<hr/>
<label>Order id   :</label><input type=text id="rzp-text" /><br/>
<button id="rzp-button1">CHeckout</button>
<div id=paymentDetails></div>
<script>

</script>
</body>

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
    console.log("poling");
    src="https://cdn.jsdelivr.net/npm/axios@0.26.1/dist/axios.min.js";
    
    axios.post('/api/payment/order').then((info)=>
{
console.log(info)

var options = {
    "key": "rzp_test_TjfI1Q9set4utL",
    "name": "Triquetra Fundraiser",
    "description": "Test Transaction",
    "image": "",
	"order_id": info.data.id,
    "callback_url": "https://www.instagram.com/",
    "redirect":true,
    "theme": {
        "color": "#3399cc"
    }
};
var rzp1 = new Razorpay(options);
   
	document.getElementById('order-button1').onclick=function(e){
		rzp1.open();
    e.preventDefault();
	}

}
)
</script>

<!-- <script >
	document.getElementById('rzp-button1').onclick = function(e){
    var options = {
    "key": "rzp_test_TjfI1Q9set4utL",
	"currency": "INR",
    "name": "Triquetra Fundraiser",
    "description": "Test Transaction",
    "image": "",
	"order_id": document.getElementById('rzp-text').value,
    "callback_url": "https://www.instagram.com/",
    "redirect":true,
    "theme": {
        "color": "#3399cc"
    }
};
	var rzp1 = new Razorpay(options);
    rzp1.open();
    e.preventDefault();
    }
</script>  -->


</html>